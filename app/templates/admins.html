{% extends "base.html" %}
{% block title %}Admins{% endblock %}
{% block content %}
<div class="container mt-5">
  <div class="row justify-content-center">
      <div class="col-md-9">
  <h2 class=" text-danger text-center">Search Admins</h2>
  <form action="{{ url_for('moderators') }}" method="post" class="m-5 " >
    <div class="mb-2">
      <input type="text" name="search" class="form-control" id="search" placeholder="Search moderators by username, first name, or last name">
      <button type="submit" class="btn btn-success btn-justify-content-center w-45 my-3"><i class="fas fa-user-plus"></i> Search Admins</button>
    </div>
  </form>
</div>
</div>

{% if results %}
    <h3 class=" text-danger text-center m-2">Search results</h3>
    <div class="container-zone m-5 justify-content-center">
      <table class='table table-dark'>
          <tr>
              <th class=" text-success text-center">First Name, Family Name </th>
            </tr>
            {% for user in results %}
            <tr>
                <td class=" text-success text-center">{{ user[0][1] }}</td>
              </tr>
              {% endfor %}
          </table>
        </div>
        <h1>Admins</h1>
    <div id="adminContainer"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('/api/admins')
            .then(response => response.json())
            .then(admins => {
                const container = document.getElementById('adminContainer');
                const adminElements = admins.map(admin => {
                    return `
                        <div class="admin-profile">
                            <img src="${admin.profile_image}" alt="${admin.first_name} ${admin.last_name}" style="width: 100px; height: auto;">
                            <p>User ID: ${admin.user_id}</p>
                            <p>Name: ${admin.first_name} ${admin.last_name}</p>
                        </div>
                    `;
                });
                container.innerHTML = adminElements.join('');
            })
            .catch(error => console.error('Error fetching data:', error));
        });
    </script>
      </div>
    </div>
        {% else %}
{% if message %}
<h3 class=" text-light text-center">{{ message }}</h3>
{% endif %}
{% endif %}
{% endblock %}
  
